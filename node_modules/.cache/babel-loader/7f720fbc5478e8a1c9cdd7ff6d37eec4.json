{"ast":null,"code":"var _jsxFileName = \"/Users/parthvyas/Desktop/parthvyas18.github.io/src/components/Display.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from 'react';\nimport Peer from 'peerjs';\nimport copy from \"copy-to-clipboard\";\nimport Interaction from './Interaction'; // import user from '../images/userImg.png'\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Display = _ref => {\n  _s();\n\n  let {\n    visible,\n    remoteVideoRef,\n    currentUserVideoRef,\n    MediaSet,\n    RemoteMediaSet,\n    mediaStrm,\n    usrstrm\n  } = _ref;\n  return function (remoteVideoRef, currentUserVideoRef) {\n    const [peerId, setPeerId] = useState('');\n    const [remotePeerIdValue, setRemotePeerIdValue] = useState('');\n    var remoteVideoRef = useRef(null);\n    var currentUserVideoRef = useRef(null); //const currentUserVideoRef = useRef(null);\n\n    const peerInstance = useRef(null);\n    const [callInit, setCallInit] = useState(false);\n\n    const copyToClipboard = () => {\n      copy(peerId);\n      alert(`You have copied \"${peerId}\"`);\n    };\n\n    useEffect(() => {\n      if (visible === false) {\n        currentUserVideoRef.current.srcObject = mediaStrm;\n        currentUserVideoRef.current.play();\n      }\n    }, []);\n    useEffect(() => {\n      const peer = new Peer();\n      peer.on('open', id => {\n        setPeerId(id);\n      });\n      peer.on('call', call => {\n        setCallInit(true);\n        var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n        getUserMedia({\n          video: true\n        }, mediaStream => {\n          MediaSet(mediaStream);\n          currentUserVideoRef.current.srcObject = mediaStream;\n          currentUserVideoRef.current.play();\n          call.answer(mediaStream);\n          call.on('stream', function (remoteStream) {\n            RemoteMediaSet(remoteStream);\n            remoteVideoRef.current.srcObject = remoteStream;\n            remoteVideoRef.current.play();\n          });\n        });\n      });\n      peerInstance.current = peer;\n    }, []);\n\n    const call = remotePeerId => {\n      setCallInit(true);\n      var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n      getUserMedia({\n        video: true\n      }, mediaStream => {\n        MediaSet(mediaStream);\n        currentUserVideoRef.current.srcObject = mediaStream;\n        currentUserVideoRef.current.play();\n        console.log(mediaStream);\n        const call = peerInstance.current.call(remotePeerId, mediaStream);\n        call.on('stream', remoteStream => {\n          RemoteMediaSet(remoteStream);\n          remoteVideoRef.current.srcObject = remoteStream;\n          remoteVideoRef.current.play();\n        });\n      });\n    }; //  if(visible){\n\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h d-flex flex-column justify-content-around\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-around \",\n        style: {\n          height: \"60%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"45%\",\n            background: '#373738'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h d-flex justify-content-center align-items-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \" d-flex flex-column align-items-center\",\n              style: {\n                height: \"100%\",\n                width: \"100%\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"video\", {\n                style: {\n                  width: \"100%\",\n                  height: \"100%\"\n                },\n                ref: currentUserVideoRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 11\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-around align-items-center \",\n            style: {\n              background: '#373738'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                width: '30%'\n              },\n              onClick: copyToClipboard,\n              children: \"Copy Id\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 13\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 11\n          }, _this), callInit === false && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-around align-items-center \",\n            style: {\n              background: '#373738'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: remotePeerIdValue,\n              onChange: e => setRemotePeerIdValue(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => call(remotePeerIdValue),\n              children: \"Call\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 11\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"45%\",\n            background: '#373738',\n            borderRadius: '1.5%',\n            display: callInit ? 'block' : 'none'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h  d-flex justify-content-center align-items-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \" d-flex flex-column align-items-center\",\n              style: {\n                height: \"100%\",\n                width: \"100%\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"video\", {\n                style: {\n                  width: \"100%\",\n                  height: \"100%\"\n                },\n                ref: remoteVideoRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 12\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }, _this);\n  }(remoteVideoRef, currentUserVideoRef);\n}; // }else{\n//   return(\n//     <div></div>\n//   );\n// }\n// };\n\n\n_s(Display, \"Np22lqg5BJiLfPw6RQbLpO1gB/U=\");\n\n_c = Display;\nexport default Display;\n\nvar _c;\n\n$RefreshReg$(_c, \"Display\");","map":{"version":3,"names":["useEffect","useRef","useState","Peer","copy","Interaction","Display","visible","remoteVideoRef","currentUserVideoRef","MediaSet","RemoteMediaSet","mediaStrm","usrstrm","peerId","setPeerId","remotePeerIdValue","setRemotePeerIdValue","peerInstance","callInit","setCallInit","copyToClipboard","alert","current","srcObject","play","peer","on","id","call","getUserMedia","navigator","webkitGetUserMedia","mozGetUserMedia","video","mediaStream","answer","remoteStream","remotePeerId","console","log","height","width","background","e","target","value","borderRadius","display"],"sources":["/Users/parthvyas/Desktop/parthvyas18.github.io/src/components/Display.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport Peer from 'peerjs';\nimport copy from \"copy-to-clipboard\";\nimport Interaction from './Interaction';\n// import user from '../images/userImg.png'\nconst Display = ({visible,remoteVideoRef,currentUserVideoRef,MediaSet,RemoteMediaSet,mediaStrm,usrstrm}) => {\n\n  const [peerId, setPeerId] = useState('');\n\n  const [remotePeerIdValue, setRemotePeerIdValue] = useState('');\n  var remoteVideoRef = useRef(null);\n  var currentUserVideoRef=useRef(null);\n  //const currentUserVideoRef = useRef(null);\n  const peerInstance = useRef(null);\n  const [callInit,setCallInit]=useState(false);\n\n  const copyToClipboard = () => {\n    copy(peerId);\n    alert(`You have copied \"${peerId}\"`);\n }\n useEffect(() =>{\n    if(visible===false){\n      currentUserVideoRef.current.srcObject = mediaStrm;\n      currentUserVideoRef.current.play();\n    }\n },[]);\n  useEffect(() => {\n    const peer = new Peer();\n\n    peer.on('open', (id) => {\n      setPeerId(id)\n    });\n\n    peer.on('call', (call) => {\n      setCallInit(true)\n      var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n      getUserMedia({ video: true }, (mediaStream) => {\n\n        MediaSet(mediaStream);\n        currentUserVideoRef.current.srcObject = mediaStream;\n      currentUserVideoRef.current.play();\n        call.answer(mediaStream)\n        \n        call.on('stream', function(remoteStream) {\n          RemoteMediaSet(remoteStream);\n          remoteVideoRef.current.srcObject = remoteStream;\n          remoteVideoRef.current.play();\n        });\n      });\n    })\n\n    peerInstance.current = peer;\n  }, [])\n\n  const call = (remotePeerId) => {\n    setCallInit(true)\n    var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n    getUserMedia({ video: true }, (mediaStream) => {\n      MediaSet(mediaStream);\n      currentUserVideoRef.current.srcObject = mediaStream;\n      currentUserVideoRef.current.play();\n  \n       console.log(mediaStream);\n      const call = peerInstance.current.call(remotePeerId, mediaStream)\n\n      call.on('stream', (remoteStream) => {\n        RemoteMediaSet(remoteStream);\n        remoteVideoRef.current.srcObject = remoteStream;\n        remoteVideoRef.current.play();\n       \n      });\n    });\n  }\n  //  if(visible){\n  return (\n    \n    <div className=\"h d-flex flex-column justify-content-around\" >\n     \n      \n      <div className=\"d-flex justify-content-around \" style={{ height: \"60%\" }}>\n        <div  style={{width:\"45%\",background:'#373738'}}> \n          <div className=\"h d-flex justify-content-center align-items-center\" >\n              <div className=\" d-flex flex-column align-items-center\" style={{ height: \"100%\",width:\"100%\"}}>     \n             \n                  <video style={{width:\"100%\",height:\"100%\"}}ref={currentUserVideoRef} />\n            \n              </div>\n              \n          </div>\n          <div className=\"d-flex justify-content-around align-items-center \" style={{background:'#373738'}} > \n            <button style={{width:'30%'}} onClick={copyToClipboard}>Copy Id</button>\n            \n          </div>\n          {callInit ===false &&\n          <div className=\"d-flex justify-content-around align-items-center \" style={{background:'#373738'}} > \n              <input type=\"text\" value={remotePeerIdValue} onChange={e => setRemotePeerIdValue(e.target.value)} />\n              <button onClick={() => call(remotePeerIdValue)}>Call</button>\n          </div>\n          }\n        </div>\n       \n\n      \n        <div style={{width:\"45%\",background:'#373738',borderRadius:'1.5%',display:callInit?'block':'none'}}>\n           <div className=\"h  d-flex justify-content-center align-items-center\" >\n              <div className=\" d-flex flex-column align-items-center\" style={{ height: \"100%\",width:\"100%\"}}>     \n            \n                  <video style={{width:\"100%\",height:\"100%\"}} ref={remoteVideoRef} />\n            \n              </div>\n              \n          </div>\n        </div>\n    \n      </div>\n    </div>\n    \n     \n    \n  );\n        }\n  // }else{\n  //   return(\n  //     <div></div>\n  //   );\n  // }\n// };\n\nexport default Display;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}